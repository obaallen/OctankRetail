<!DOCTYPE html>
<html lang="zxx">
<head>
	<!-- Meta Tag -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name='copyright' content=''>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Title Tag  -->
    <title>PDaaS</title>
	<!-- Favicon -->
	<link rel="icon" type="image/png" href="">
	<!-- Web Font -->
	<link href="https://fonts.googleapis.com/css?family=Poppins:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap" rel="stylesheet">
	

	<!-- StyleSheet -->
	
	<!-- Bootstrap -->
	<link rel="stylesheet" href="css/bootstrap.css">
	<!-- Magnific Popup -->
    <link rel="stylesheet" href="css/magnific-popup.min.css">
	<!-- Font Awesome -->
    <link rel="stylesheet" href="css/font-awesome.css">
	<!-- Fancybox -->
	<link rel="stylesheet" href="css/jquery.fancybox.min.css">
	<!-- Themify Icons -->
    <link rel="stylesheet" href="css/themify-icons.css">
	<!-- Jquery Ui -->
    <link rel="stylesheet" href="css/jquery-ui.css">
	<!-- Nice Select CSS -->
    <link rel="stylesheet" href="css/niceselect.css">
	<!-- Animate CSS -->
    <link rel="stylesheet" href="css/animate.css">
	<!-- Flex Slider CSS -->
    <link rel="stylesheet" href="css/flex-slider.min.css">
	<!-- Owl Carousel -->
    <link rel="stylesheet" href="css/owl-carousel.css">
	<!-- Slicknav -->
    <link rel="stylesheet" href="css/slicknav.min.css">
	
	<!-- StyleSheet -->
	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/responsive.css">

	<script id="load_products" type="text/x-handlebars-template">
		<div class="col-md-3">
			<div class="single-product">
		  		<div class="product-img">
					<a href="product-details.html">
						<img class="default-img" src="{{ image }}" alt="#">
						<img class="hover-img" src="{{ image }}" alt="#">
					</a>
					<div class="button-head">
						<div class="product-action-2">
							{{#if inventory}}
							<a title="Add to cart" href="#">{{inventory}} items left!</a>
							{{else}}
							<a title="Add to cart" href="#">Sold Out!</a>
							{{/if}}
						</div>
					</div>
				</div>
				<div class="product-content">
					<h4><a href="">{{{ title }}}</a></h4>
					<p><a href="">{{{ description }}}</a></p>
					<div class="product-price">
						<span>${{{ price }}}</span><br><br>
						{{#if inventory}}
						<a href="" class="buynt btn btn-outline-mybtn" data-id="{{ id }}" onclick="buythatproduct(this);">Buy Now</a>
						{{/if}}
					</div>
				</div> 
			</div>
		</div>
	</script>
	
</head>
<body class="js">
	
	<!-- End Preloader -->
		
		<!-- Header -->
		<header class="header shop">
			
			<!-- End Topbar -->
			<div class="middle-inner">
				<div class="container">
					<div class="row">
						<div class="col-md-6">
							<!-- Logo -->
							<div class="logo">
								<a href="index.html"><h2>Octank Ecommerce</h2></a> 
							</div>
							<!--/ End Logo -->
							
						</div>
						<!-- <div class="col-md-6 d-flex justify-content-end"> -->
							<!-- Logo -->
							<!-- <div id="clockdiv">
								<div>
								  <span class="days"></span>
								  <div class="smalltext">Days</div>
								</div>
								<div>
								  <span class="hours"></span>
								  <div class="smalltext">Hours</div>
								</div>
								<div>
								  <span class="minutes"></span>
								  <div class="smalltext">Minutes</div>
								</div>
								<div>
								  <span class="seconds"></span>
								  <div class="smalltext">Seconds</div>
								</div>
							  </div> -->
							<!--/ End Logo -->
							
						<!-- </div> -->
					</div>
				</div>
			</div>
		</header>
		<!--/ End Header -->
	
		<!-- Product Style -->
		<section class="product-area section">
			<div class="container">
				<div class="row" id="products">
				</div>
			</div>
		</section>
		<!--/ End Product Style 1  -->	
		<div class="app">
			<div class="app-header">
			  <div class="app-logo">
				<img
				  src="https://aws-amplify.github.io/images/Logos/Amplify-Logo-White.svg"
				  alt="AWS Amplify"
				/>
			  </div>
			  <h1>Welcome to the Amplify Framework</h1>
			</div>
			<div class="app-body">
			  <h1>Mutation Results</h1>
			  <button id="MutationEventButton">Add data</button>
			  <div id="MutationResult"></div>
			  <hr />
	  
			  <h1>Query Results</h1>
			  <div id="QueryResult"></div>
			  <hr />
	  
			  <h1>Subscription Results</h1>
			  <div id="SubscriptionResult"></div>
			</div>
		  </div>
		  <script src="main.bundle.js"></script>
	
    <!-- Jquery -->
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-migrate-3.0.0.js"></script>
	<script src="js/jquery-ui.min.js"></script>
	<!-- Popper JS -->
	<script src="js/popper.min.js"></script>
	<!-- Bootstrap JS -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Color JS -->
	<script src="js/colors.js"></script>
	<!-- Slicknav JS -->
	<script src="js/slicknav.min.js"></script>
	<!-- Owl Carousel JS -->
	<!-- <script src="js/owl-carousel.js"></script> -->
	<!-- Magnific Popup JS -->
	<!-- <script src="js/magnific-popup.js"></script> -->
	<!-- Fancybox JS -->
	<script src="js/facnybox.min.js"></script>
	<!-- Waypoints JS -->
	<!-- <script src="js/waypoints.min.js"></script> -->
	<!-- Countdown JS -->
	<!-- <script src="js/finalcountdown.min.js"></script> -->
	<!-- Nice Select JS -->
	<script src="js/nicesellect.js"></script>
	<!-- Ytplayer JS -->
	<!-- <script src="js/ytplayer.min.js"></script> -->
	<!-- Flex Slider JS -->
	<!-- <script src="js/flex-slider.js"></script> -->
	<!-- ScrollUp JS -->
	<script src="js/scrollup.js"></script>
	<!-- Onepage Nav JS -->
	<script src="js/onepage-nav.min.js"></script>
	<!-- Easing JS -->
	<script src="js/easing.js"></script>
	<!-- Active JS -->
	<script src="js/active.js"></script>
	<!-- Products JS -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.11/handlebars.min.js"></script>
	<script src="js/products.js"></script>
	<script>
		// function checkinventory(mi) {
		// 	url = 'https://xfyws8r1e6.execute-api.us-east-1.amazonaws.com/prod/listItems'
		// 	var products = []
		// 	d = mi.getAttribute("data-id");
		// 	const request = new XMLHttpRequest();
		// 	request.open('GET', url);
		// 	request.onload = () => {
		// 		var data1 = JSON.parse(request.responseText);
		// 		var data2 = JSON.stringify(eval("(" + data1["items"] + ")"));
		// 		const data = JSON.parse(data2);
			
		// 		for (i = 0; i < 5; i++) {
		// 			product_result = data[i]
					
		// 			if (product_result["GoodId"] = d) {
		// 				if (product_result["numInStock"] = 0) {
		// 					alert("Sorry, we are sold out on that item.");
		// 				};
		// 			};
		// 		};
		// 		buythatproduct(d)
		// 	};
		// 	request.send();
		// };
	
		function buythatproduct(d) {
			id = d.getAttribute("data-id");
			
			var data = '{"ItemId": '+id+'}';
			
			var xhr = new XMLHttpRequest();

			xhr.addEventListener("readystatechange", function() {
			if(this.readyState === 4) {
				console.log(this.responseText);
				// const data = JSON.parse(this.responseText);
				// if (data["numInStock"] < 0) {
				// 	alert("Sorry, we are sold out on that item.");
				// }else{
				// 	alert("Congrats on your purchase! Continue shopping.");
				// };
			}
			});
			console.log(data);
			xhr.open("POST", "https://xfyws8r1e6.execute-api.us-east-1.amazonaws.com/prod/buyitem");
			xhr.setRequestHeader("Content-Type", "text/plain");
			// xhr.onload = () => {
			// 	const data = JSON.parse(request.responseText);
			// 	console.log(data);
			// 	if (data["numInStock"] < 0) {
			// 		alert("Sorry, we are sold out on that item.");
			// 	}else{
			// 		alert("Congrats on your purchase! Continue shopping.");
			// 	};
        	// };
			xhr.send(data);

			alert("Congrats on your purchase! Continue shopping.");
		};

	</script>
</body>
</html>
